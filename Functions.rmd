---
title: "Functions"
author: "Sophie Breitbart"
output: html_document
---


Goals:
- use as few packages as possible
- 30 minutes

Outline:
- *HAVE THEM SET UP A PROJECT AND SET WD? OTHERWISE IDK IF HERE:HERE WILL WORK*
- function basics // 5 min
  - what is a function?
  -   we use them all the time when they're made by other people
  - when should we make our own?
    - Hadley's golden rule: whenever you otherwise copy/paste something >3x (but there are exceptions of course)
- examples of homemade functions // 15-20 min
  - basic: exporting table, e.g.
    - write a function that makes a table
    * they make one
  - intermediate: nesting functions within functions
    - write a function that makes a custom flextable from table **is there a base function that can do this so they don't have to load another library??**
    * they make one
  - advanced: scale up: making multiple plots & saving to individual files
    - write a function that makes multiple custom flextables from table and exports each to its own file
    * they do this too
- Experimentation time // 5-10 min
  - include additional challenge for those who've finished other exercises
  - ** make breakout rooms based on skill level so they can chat with like-skilled participants? **
  
# Install packages and load libraries
```{r}
# Install packages
install.packages("here")

# Load libraries
## explain genuis behind "here" package
library(here)

# Make dataset from built-in dataset: "Body Temperature Series of Two Beavers""
beaver_1 <- beaver1
beaver_2 <- beaver2
```

# Functions: The Basics
## Goal 1: Make a function that exports a dataframe to csv
```{r}
## go over basic setup of function (assign it to a name, input variables, indenting, returns)
Beaver_to_csv1.1 <- function(dataframe, filename) {
  write.csv(dataframe, file = filename)
}

## Example 1: Export beaver csv with only filename in path
### make filename
filename1.1 <- "Beaver1.csv"

### Export df to csv
#### Talk through function,
Beaver_to_csv1.1(beaver_1, filename1.1)

## Example 2: Export beaver csv with only filename in path
### Make folder expecially for beaver files (make "exports" folder)
### Make new path 
path1.2 <- here::here("./exports/ ") ##### Can't figure out how to export without a space in the filepath so I'm adding on here and later getting rid of it with gsub
### Make new filename and type: separate name from type
filename1.2 <- "Beaver1"
filetype1.2 <- ".csv"

### Make function that exports df to csv in csvs folder
#### adding extra piece: filetype. We'll use .csv but could use .txt if wanted, etc.
##### Talk through function, esp. new gsub step
Beaver_to_csv1.2 <- function(dataframe, path, filename, filetype) {
  write.csv(dataframe,
            gsub(" ", "",
                 paste0(path, filename, filetype)))
}
  
### Export df to csv in csvs folder
Beaver_to_csv1.2(beaver_1, path1.2, filename1.2, filetype1.2)
#### Just for fun, add .txt as an option
Beaver_to_csv1.2(beaver_1, path1.2, filename1.2, ".txt")
#### Futhermore, we could skip the step of saving the function components to individual variables and could input it all on the fly here
Beaver_to_csv1.2(dataframe = beaver_1,
                 path = here::here("./exports/ "),
                 filename = "Beaver1",
                 filetype = ".txt")
#### You don't need the "x =" portion either... just helps clarify things
Beaver_to_csv1.2(beaver_1,
                 here::here("./exports/ "),
                 "Beaver1",
                 ".csv")
```

## Goal 2: Make a function that exports a list of dataframes to separate csvs
```{r}

```

